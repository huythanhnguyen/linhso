/**
 * Mobile Styles - Phone Analysis App
 * CSS dành riêng cho các thiết bị di động
 */

/* ===== TABLET (< 992px) ===== */
@media (max-width: 992px) {
    /* Cấu trúc trang */
    .main-content {
        flex-direction: column;
        position: relative;
    }
    
    .container {
        padding: var(--space-sm);
    }
    
    /* Chat Panel */
    .chat-panel {
        height: 75vh;
        z-index: 1;
        width: 100%;
        max-width: 100%;
    }
    
    /* Info Panel */
    .info-panel {
        position: fixed;
        top: 0;
        right: 0;
        height: 100%;
        width: 320px;
        max-width: 85%;
        transform: translateX(100%);
        opacity: 0;
        overflow-y: auto;
        z-index: 1000;
        border-radius: 0;
        border-left: 1px solid var(--border-color);
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
    }
    
    .info-panel.visible {
        transform: translateX(0);
        opacity: 1;
    }
    
    /* Auth Box */
    .auth-box {
        width: 90%;
        max-width: 450px;
    }
    
    /* Các nút di động */
    .mobile-only {
        display: flex;
    }
    
    /* User Header */
    .user-header {
        margin-bottom: var(--space-md);
    }
    
    /* Header */
    header {
        padding: var(--space-md) 0;
        margin-bottom: var(--space-lg);
    }
    
    header h2 {
        font-size: 1.6rem;
    }
    
    header p {
        font-size: 0.95rem;
    }
}

/* ===== MOBILE PHONE (< 768px) ===== */
@media (max-width: 768px) {
    /* Giảm các khoảng cách */
    :root {
        --space-md: 12px;
        --space-lg: 16px;
        --space-xl: 24px;
    }
    
    /* Header nhỏ hơn */
    header {
        padding: var(--space-sm) 0;
        margin-bottom: var(--space-md);
    }
    
    header h2 {
        font-size: 1.4rem;
    }
    
    header p {
        font-size: 0.9rem;
        max-width: 100%;
    }
    
    /* User Header */
    .user-header {
        flex-direction: row;
        align-items: center;
        padding: var(--space-sm);
    }
    
    .btn-logout {
        padding: 6px 12px;
        font-size: 0.9rem;
    }
    
    .user-info {
        font-size: 1rem;
    }
    
    /* Chat Panel */
    .chat-panel {
        height: 80vh;
    }
    
    .chat-header {
        padding: var(--space-sm) var(--space-md);
    }
    
    .chat-header h2 {
        font-size: 1.2rem;
    }
    
    /* Chat Messages */
    .chat-messages {
        padding: var(--space-md);
        padding-bottom: calc(60px + env(safe-area-inset-bottom, 0px));
    }
    
    /* Message Bubbles */
    .message {
        max-width: 85%;
        padding: var(--space-sm) var(--space-md);
        font-size: 0.95rem;
    }
    
    /* Chat Input */
    .chat-input {
        padding: var(--space-sm) var(--space-md);
    }
    
    .chat-input input {
        height: 44px;
        font-size: 16px; /* Để ngăn iOS zoom khi focus */
        padding: var(--space-sm) 44px var(--space-sm) var(--space-md);
    }
    
    .chat-input button {
        width: 34px;
        height: 34px;
        right: calc(var(--space-md) + 5px);
    }
    
    /* Info Panel */
    .info-panel {
        width: 85%;
    }
    
    .info-tab-button {
        font-size: 0.9rem;
        padding: 10px;
    }
    
    .info-tab-content {
        padding: var(--space-sm);
    }
    
    /* Suggestion Chips */
    .suggestion-chips {
        flex-wrap: wrap;
        gap: 6px;
    }
    
    .category-btn {
        padding: 5px 10px;
        font-size: 13px;
    }
    
    /* Feedback Buttons */
    .feedback-buttons {
        flex-wrap: wrap;
    }
    
    /* Analysis Container */
    .analysis-container {
        padding: 12px;
    }
    
    .energy-levels {
        flex-wrap: wrap;
    }
}

/* ===== SMALL MOBILE (< 576px) ===== */
@media (max-width: 576px) {
    /* Giảm thêm khoảng cách */
    :root {
        --space-md: 10px;
        --space-lg: 14px;
    }
    
    .container {
        padding: var(--space-xs);
    }
    
    /* Auth */
    .auth-box {
        width: 100%;
        max-width: 100%;
        border-radius: 0;
    }
    
    .auth-header {
        padding: var(--space-sm);
    }
    
    .auth-form {
        padding: var(--space-md);
    }
    
    .auth-tab {
        padding: 6px 10px;
        font-size: 13px;
    }
    
    .form-group input {
        padding: 10px;
    }
    
    /* Chat Panel */
    .chat-panel {
        height: 85vh;
        border-radius: var(--radius-sm);
    }
    
    /* Messages */
    .message {
        max-width: 90%;
        padding: 8px 12px;
        font-size: 0.9rem;
        margin-bottom: 6px;
    }
    
    .chat-messages {
        gap: var(--space-sm);
    }
    
    /* Chat Input */
    .chat-input {
        padding: 8px 10px;
    }
    
    .chat-input input {
        height: 40px;
        padding: 8px 40px 8px 12px;
    }
    
    .chat-input button {
        width: 32px;
        height: 32px;
        right: 15px;
    }
    
    /* Info Panel */
    .info-panel {
        width: 100%;
    }
    
    .info-panel-header {
        padding: 10px 12px;
    }
    
    .info-panel-header h3 {
        font-size: 1rem;
    }
    
    .info-tab-button {
        padding: 8px;
        font-size: 0.85rem;
    }
    
    .info-tab-content {
        padding: 10px;
    }
    
    /* History Items */
    .history-item {
        padding: 10px;
    }
    
    .history-phone {
        font-size: 1rem;
    }
    
    /* Analysis Container */
    .analysis-section h4 {
        font-size: 0.9rem;
    }
    
    .star-item {
        padding: 6px 8px;
    }
    
    .star-pair {
        font-size: 0.75rem;
        padding: 1px 5px;
    }
    
    .energy-item {
        padding: 5px;
    }
    
    .energy-value {
        font-size: 1rem;
    }
    
    /* User Header */
    .user-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-sm);
    }
}

/* ===== VERY SMALL MOBILE (< 380px) ===== */
@media (max-width: 380px) {
    .message {
        max-width: 95%;
        font-size: 0.85rem;
        padding: 6px 10px;
    }
    
    .chat-input input {
        height: 38px;
        font-size: 15px;
    }
    
    .chat-input button {
        width: 30px;
        height: 30px;
        font-size: 0.85rem;
    }
    
    .category-btn {
        padding: 4px 8px;
        font-size: 12px;
    }
    
    .feedback-btn {
        padding: 4px 8px;
        font-size: 0.8rem;
    }
    
    .history-phone {
        font-size: 0.95rem;
    }
    
    .star-list, .energy-levels {
        gap: 4px;
    }
}

/* ===== LANDSCAPE MODE ===== */
@media (max-height: 500px) and (orientation: landscape) {
    .chat-panel {
        height: 65vh;
    }
    
    .auth-container {
        min-height: auto;
        padding: var(--space-md) 0;
    }
    
    .chat-messages {
        padding-bottom: calc(50px + env(safe-area-inset-bottom, 0px));
    }
    
    .chat-input {
        padding: 6px var(--space-sm);
    }
    
    .chat-input input {
        height: 38px;
    }
    
    header {
        padding: var(--space-xs) 0;
        margin-bottom: var(--space-sm);
    }
    
    .info-tab-content {
        max-height: 60vh;
    }
}

/* ===== APPLE DEVICE FIXES ===== */
@supports (-webkit-touch-callout: none) {
    /* Fix Safari text sizing */
    body {
        -webkit-text-size-adjust: 100%;
    }
    
    /* Fix for iOS scroll bouncing */
    .chat-panel {
        -webkit-overflow-scrolling: touch;
        -webkit-transform: translateZ(0);
    }
    
    .chat-messages {
        -webkit-overflow-scrolling: touch;
    }
    
    /* Fix font size in inputs */
    input, textarea, select {
        font-size: 16px; /* Prevents zoom on iOS */
    }
    
    /* Fix height calculation with keyboard */
    .chat-panel {
        height: -webkit-fill-available;
        max-height: 85vh;
    }
    
    /* Fix bottom spacing for iPhone X+ with home indicator */
    @supports (padding: max(0px)) {
        .chat-input {
            padding-bottom: max(var(--space-sm), env(safe-area-inset-bottom, 0px));
        }
        
        .chat-messages {
            padding-bottom: max(60px, calc(60px + env(safe-area-inset-bottom, 0px)));
        }
    }
}

/* ===== ANDROID SPECIFIC FIXES ===== */
@supports not (-webkit-touch-callout: none) {
    /* Android-specific adjustments if needed */
    .chat-input input:focus {
        font-size: 16px; /* Improves text input on some Android devices */
    }
}
